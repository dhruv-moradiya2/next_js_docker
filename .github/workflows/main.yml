name: CI/CD Pipeline Frontend-Web

on:
  push:
    branches: [main, development]
  workflow_dispatch:
        
jobs:
  build-and-deploy:
    runs-on: ubuntu-latest
    steps:
      - name: checkout code
        uses: actions/checkout@v5
      
      - name: docker version
        run: docker version

      - name: docker container up down
        run: |
          if docker-compose down; then
            echo "Docker-compose down executed successfully."
          else
            echo "Docker-compose down failed or no containers were running."
            exit 0
          fi
          docker-compose up -d --build

      - name: list docker containers
        run: |
          sleep 20
          docker ps -a